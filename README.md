# scope-closure
## 1作用域是什么？
作用域是一套规则，用于确定在何处以及如何查找变量（标识符）。如果查找的目的是对变量进行赋值，那么就会使用LHS 查询；如果目的是获取变量的值，就会使用RHS 查询。
赋值操作符会导致LHS 查询。＝操作符或调用函数时传入参数的操作都会导致关联作用域的赋值操作。
JavaScript 引擎首先会在代码执行前对其进行编译，在这个过程中，像var a = 2 这样的声
明会被分解成两个独立的步骤：
1. 首先，var a 在其作用域中声明新变量。这会在最开始的阶段，也就是代码执行前进行。
2. 接下来，a = 2 会查询（LHS 查询）变量a 并对其进行赋值。
LHS 和RHS 查询都会在当前执行作用域中开始，如果有需要（也就是说它们没有找到所需的标识符），就会向上级作用域继续查找目标标识符，这样每次上升一级作用域（一层楼），最后抵达全局作用域（顶层），无论找到或没找到都将停止。
不成功的RHS 引用会导致抛出ReferenceError 异常。不成功的LHS 引用会导致自动隐式地创建一个全局变量（非严格模式下），该变量使用LHS 引用的目标作为标识符，或者抛出ReferenceError 异常（严格模式下）。
## 2 词法作用域
词法作用域意味着作用域是由书写代码时函数声明的位置来决定的。编译的词法分析阶段基本能够知道全部标识符在哪里以及是如何声明的，从而能够预测在执行过程中如何对它们进行查找。
eval和with可改变词法作用域，而且耗性能，不要用。
## 3 函数作用域和块作用域
函数是JavaScript 中最常见的作用域单元。本质上，声明在一个函数内部的变量或函数会在所处的作用域中“隐藏”起来，这是有意为之的良好软件的设计原则。
但函数不是唯一的作用域单元。块作用域指的是变量和函数不仅可以属于所处的作用域，也可以属于某个代码块（通常指{ .. } 内部）。
从ES3 开始，try/catch 结构在catch 分句中具有块作用域。
在ES6 中引入了let 关键字（var 关键字的表亲），用来在任意代码块中声明变量。if(..) { let a = 2; } 会声明一个劫持了if 的{ .. } 块的变量，并且将变量添加到这个块中。
## 4 提升
### 4.1 先有鸡还是先有蛋
### 4.2 编译器再度来袭
### 4.3 函数优先
### 4.4 小结
## 5 作用域闭包
### 5.1 启示
### 5.2 实质问题
### 5.3 现在我懂了
### 5.4 循环和闭包
### 5.5 模块
### 5.6 小结
